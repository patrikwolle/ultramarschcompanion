<div class="screen">
  <header class="topbar">
    <nav class="tabs" role="tablist" aria-label="HauptmenÃ¼">
      <button class="tab" role="tab" [attr.aria-selected]="activeTab==='progress'" (click)="activeTab='progress'" [class.is-active]="activeTab==='progress'">Fortschritt</button>
      <button class="tab" role="tab" [attr.aria-selected]="activeTab==='input'" (click)="activeTab='input'" [class.is-active]="activeTab==='input'">Meldung</button>
      <button class="tab" role="tab" [attr.aria-selected]="activeTab==='settings'" (click)="activeTab='settings'" [class.is-active]="activeTab==='settings'">Einstellungen</button>
    </nav>

    <div class="controls" *ngIf="activeTab==='progress'">
      <label *ngIf="selectedUser !== undefined" class="search">
        <span class="search__icon" aria-hidden="true">ðŸ”Ž</span>
        <input class="search__input" type="text" pInputText placeholder="Freund adden (Vorname N.)" [(ngModel)]="friendId" (keyup.enter)="addFriend(friendId)" />
      </label>
      <label *ngIf="selectedUser === undefined" class="search">
        <span class="search__icon" aria-hidden="true">ðŸ”Ž</span>
        <input class="search__input" type="text" pInputText placeholder="Vorname N." [(ngModel)]="selectUserId" (keyup.enter)="selectUser(selectUserId)" />
      </label>

      <button class="chip" (click)="toggleSheet()" [attr.aria-expanded]="sheetOpen" aria-haspopup="dialog">
        Sortieren
      </button>
    </div>
  </header>

  <main class="content" *ngIf="activeTab==='progress'">
    <ul class="list" *ngIf="renderFriends.length; else emptyState">
      <li class="card" *ngFor="let r of renderFriends">
        <um-friend [friend]="r"></um-friend>
      </li>
    </ul>

    <ng-template #emptyState>
      <div class="empty">Keine Treffer â€“ Filter anpassen.</div>
    </ng-template>
  </main>

  <main class="content" *ngIf="activeTab==='input'">ðŸ“¥ Formular â€žMeldung erfassenâ€œ</main>
  <main class="content" *ngIf="activeTab==='settings'">
    <app-settings></app-settings>
  </main>

  <section class="sheet" *ngIf="sheetOpen" role="dialog" aria-modal="true" aria-label="Sortieren">
    <button class="sheet__backdrop" (click)="toggleSheet()" aria-label="SchlieÃŸen"></button>
    <div class="sheet__panel">
      <header class="sheet__head">
        <h2>Sortieren</h2>
        <button class="link" (click)="toggleSheet()">Fertig</button>
      </header>

      <div class="options">
        <label class="option" [class.is-active]="sortKey==='name'">
          <input type="radio" name="sortKey" (change)="setSortKey('name')" [checked]="sortKey==='name'">
          Name
        </label>
        <label class="option" [class.is-active]="sortKey==='progress'">
          <input type="radio" name="sortKey" (change)="setSortKey('progress')" [checked]="sortKey==='progress'">
          Fortschritt %
        </label>
      </div>

      <div class="toggles">
        <label class="toggle">
          <input type="checkbox" (change)="toggleAsc()" [checked]="asc">
          <span>Aufsteigend</span>
        </label>
      </div>

      <div class="sheet__head" style="margin-top:.75rem">
        <h2>Eigener Nutzer</h2>
      </div>
      <div class="options">
        <label class="option" [class.is-active]="selfMode==='pin'">
          <input type="radio" name="selfMode" (change)="setSelfMode('pin')" [checked]="selfMode==='pin'">
          An erster Stelle fixieren
        </label>
        <label class="option" [class.is-active]="selfMode==='include'">
          <input type="radio" name="selfMode" (change)="setSelfMode('include')" [checked]="selfMode==='include'">
          In Sortierung einbeziehen
        </label>
      </div>
    </div>
  </section>
</div>
